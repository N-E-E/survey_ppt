import{_ as X,a as Z,b as Y,c as ee,d as te}from"../modules/unplugin-icons-CmLimEI5.js";import{t as T,d as q,c as x,i as _,A as s,o as i,y,b,e,l as r,F as V,x as $,g as N,Z as se,a1 as oe,a2 as le,h as D,p as H,a as O,D as L,M as ne,_ as ae,J as re,a3 as ie,a4 as ue,k as S,a5 as ce}from"../modules/vue-CTgvBLQu.js";import{j as de,b as B,C as pe,u as ve,c as A,h as me,k as _e,d as fe,l as xe}from"../index-DIXh-Ak6.js";import{r as be,u as ye,S as j,I as G,Q as he,a as ge,N as ke,G as Ce}from"./SlidesShow-CyvtKJgE.js";import{s as we,b as M,p as Se,S as $e,g as Ne,c as De,i as ze,d as Ie}from"./bottom-CwslFLes.js";import{N as Fe}from"./NoteDisplay-ZivaHNKA.js";import Me from"./DrawingControls-BGVNJ4XV.js";import{u as Te}from"./DrawingPreview-CRyVIBqO.js";import"../modules/shiki-BHubiYO5.js";function Ve(n){var a;return{info:T((a=de(n))==null?void 0:a.meta.slide),update:async()=>{}}}const qe=q({__name:"NoteStatic",props:{no:{type:Number,required:!0},class:{type:String,required:!1},clicksContext:{type:null,required:!1}},setup(n){const a=n,{info:t}=Ve(a.no);return(o,v)=>{var f,c;return i(),x(Fe,{class:_(a.class),note:(f=s(t))==null?void 0:f.note,"note-html":(c=s(t))==null?void 0:c.noteHTML,"clicks-context":o.clicksContext},null,8,["class","note","note-html","clicks-context"])}}}),Be=B(qe,[["__file","D:/暑研/梁胜文老师/huawei/survey/node_modules/@slidev/client/internals/NoteStatic.vue"]]),Q=n=>(H("data-v-52a29648"),n=n(),O(),n),Pe=["title"],Re={class:"flex gap-0.5 items-center min-w-16 font-mono mr1"},Ee=Q(()=>e("div",{"flex-auto":""},null,-1)),Le={"text-primary":""},Ae=Q(()=>e("span",{op25:""},"/",-1)),je={op50:""},Ge=["max"],He=q({__name:"ClicksSlider",props:{clicksContext:{type:null,required:!0}},setup(n){const a=n,t=y(()=>a.clicksContext.total),o=y({get(){return a.clicksContext.current>t.value?-1:a.clicksContext.current},set(c){a.clicksContext.current=c}}),v=y(()=>Array.from({length:t.value+1},(c,u)=>u));function f(){(o.value<0||o.value>t.value)&&(o.value=0)}return(c,u)=>{const z=X;return i(),b("div",{class:_(["flex gap-1 items-center select-none",t.value?"":"op50"]),title:`Clicks in this slide: ${t.value}`},[e("div",Re,[r(z,{"text-sm":"",op50:""}),Ee,o.value>=0&&o.value!==s(pe)?(i(),b(V,{key:0},[e("span",Le,$(o.value),1),Ae],64)):N("v-if",!0),e("span",je,$(t.value),1)]),e("div",{relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~",onDblclick:u[2]||(u[2]=l=>o.value=c.clicksContext.total)},[(i(!0),b(V,null,se(v.value,l=>(i(),b("div",{key:l,border:"y main","of-hidden":"",relative:"",class:_([l===0?"rounded-l border-l":"",l===t.value?"rounded-r border-r":""]),style:D({width:t.value>0?`${1/t.value*100}%`:"100%"})},[e("div",{absolute:"","inset-0":"",class:_(l<=o.value?"bg-primary op15":"")},null,2),e("div",{class:_([+l==+o.value?"text-primary font-bold op100 border-primary":"op30 border-main",l===0?"rounded-l":"",l===t.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},$(l),3)],6))),128)),oe(e("input",{"onUpdate:modelValue":u[0]||(u[0]=l=>o.value=l),class:"range",absolute:"","inset-0":"",type:"range",min:0,max:t.value,step:1,"z-10":"",op0:"",style:D({"--thumb-width":`${1/(t.value+1)*100}%`}),onMousedown:f,onFocus:u[1]||(u[1]=l=>{var k;return(k=l.currentTarget)==null?void 0:k.blur()})},null,44,Ge),[[le,o.value]])],32)],10,Pe)}}}),Oe=B(He,[["__scopeId","data-v-52a29648"],["__file","D:/暑研/梁胜文老师/huawei/survey/node_modules/@slidev/client/internals/ClicksSlider.vue"]]),P=n=>(H("data-v-d0ba6bbb"),n=n(),O(),n),Qe={class:"bg-main h-full slidev-presenter"},Ue=P(()=>e("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1)),We={class:"relative grid-section next flex flex-col p-2 lg:p-4"},Je=P(()=>e("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1)),Ke={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Xe={class:"border-t border-main py-1 px-2 text-sm"},Ze={class:"grid-section bottom flex"},Ye=P(()=>e("div",{"flex-auto":""},null,-1)),et={class:"text-2xl pl-2 pr-6 my-auto tabular-nums"},tt={class:"progress-bar"},st=q({__name:"presenter",setup(n){const a=T();be(),ye(a);const{clicksContext:t,currentSlideNo:o,currentSlideRoute:v,hasNext:f,nextRoute:c,slides:u,queryClicks:z,getPrimaryClicks:l,total:k}=ve(),{isDrawing:U}=Te(),W=A.titleTemplate.replace("%s",A.title||"Slidev");me({title:`Presenter - ${W}`}),T(!1);const{timer:J,resetTimer:R}=_e(),K=y(()=>u.value.map(w=>fe(w))),d=y(()=>t.value.current<t.value.total?[v.value,t.value.current+1]:f.value?[c.value,0]:null),C=y(()=>d.value&&K.value[d.value[0].no-1]);return L([v,z],()=>{C.value&&(C.value.current=d.value[1])},{immediate:!0}),ne(),ae(()=>{const w=a.value.querySelector("#slide-content"),m=re(ie()),I=ue();L(()=>{if(!I.value||U.value||!we.value)return;const p=w.getBoundingClientRect(),h=(m.x-p.left)/p.width*100,g=(m.y-p.top)/p.height*100;if(!(h<0||h>100||g<0||g>100))return{x:h,y:g}},p=>{xe.cursor=p})}),(w,m)=>{var E;const I=Z,p=Y,h=ee,g=te;return i(),b(V,null,[e("div",Qe,[e("div",{class:_(["grid-container",`layout${s(Se)}`])},[e("div",{ref_key:"main",ref:a,class:"relative grid-section main flex flex-col"},[r(j,{key:"main",class:"h-full w-full p-2 lg:p-4 flex-auto"},{default:S(()=>[r(ge,{"render-context":"presenter"})]),_:1}),(i(),x(Oe,{key:(E=s(v))==null?void 0:E.no,"clicks-context":s(l)(s(v)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),Ue],512),e("div",We,[d.value&&C.value?(i(),x(j,{key:"next",class:"h-full w-full"},{default:S(()=>[(i(),x($e,{is:d.value[0].component,key:d.value[0].no,"clicks-context":C.value,class:_(s(Ne)(d.value[0])),route:d.value[0],"render-context":"previewNext"},null,8,["is","clicks-context","class","route"]))]),_:1})):N("v-if",!0),Je]),N(" Notes "),(i(),b("div",Ke,[(i(),x(Be,{key:`static-${s(o)}`,no:s(o),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:D({fontSize:`${s(De)}em`}),"clicks-context":s(t)},null,8,["no","style","clicks-context"])),e("div",Xe,[r(G,{title:"Increase font size",onClick:s(ze)},{default:S(()=>[r(I)]),_:1},8,["onClick"]),r(G,{title:"Decrease font size",onClick:s(Ie)},{default:S(()=>[r(p)]),_:1},8,["onClick"]),N("v-if",!0)])])),e("div",Ze,[r(ke,{persist:!0}),Ye,e("div",{class:"timer-btn my-auto relative w-22px h-22px cursor-pointer text-lg",opacity:"50 hover:100",onClick:m[2]||(m[2]=(...F)=>s(R)&&s(R)(...F))},[r(h,{class:"absolute"}),r(g,{class:"absolute opacity-0"})]),e("div",et,$(s(J)),1)]),(i(),x(Me,{key:2}))],2),e("div",tt,[e("div",{class:"progress h-3px bg-primary transition-all",style:D({width:`${(s(o)-1)/(s(k)-1)*100}%`})},null,4)])]),r(Ce),r(he,{modelValue:s(M),"onUpdate:modelValue":m[3]||(m[3]=F=>ce(M)?M.value=F:null)},null,8,["modelValue"])],64)}}}),pt=B(st,[["__scopeId","data-v-d0ba6bbb"],["__file","D:/暑研/梁胜文老师/huawei/survey/node_modules/@slidev/client/pages/presenter.vue"]]);export{pt as default};
